{% extends "base.html" %}
{% block title %}Resources{% endblock %}

{% block content %}

<div class="container mx-auto px-4 max-w-6xl self-start mt-8 w-full relative">

    <div class="text-center mb-10">
        <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-300 to-purple-300 mb-2">Support Resources</h1>
        <p class="text-slate-300">Curated contacts and guides to help you heal and seek justice.</p>
    </div>

    <div class="flex flex-wrap justify-center gap-4 mb-10">
        <span class="px-4 py-1 rounded-full bg-pink-600/20 text-pink-200 border border-pink-500/30 text-sm cursor-pointer hover:bg-pink-600/40 transition">‚ù§Ô∏è Mental Health</span>
        <span class="px-4 py-1 rounded-full bg-blue-600/20 text-blue-200 border border-blue-500/30 text-sm cursor-pointer hover:bg-blue-600/40 transition">‚öñÔ∏è Legal Aid</span>
        <span class="px-4 py-1 rounded-full bg-green-600/20 text-green-200 border border-green-500/30 text-sm cursor-pointer hover:bg-green-600/40 transition">üè• Medical</span>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

        <div onclick="openModal('Befrienders Kenya', 'Mental Health Support', '+254 793594849 ', 'Provides confidential suicide prevention and emotional support.', 'https://befrienders.org/find-support-now/befrienders-kenya/')"
             class="group cursor-pointer backdrop-blur-md bg-slate-900/60 border border-white/10 p-6 rounded-xl hover:border-pink-500/50 hover:bg-slate-800/80 transition duration-300 transform hover:-translate-y-1 shadow-lg">
            <div class="text-4xl mb-4 bg-pink-500/20 w-16 h-16 flex items-center justify-center rounded-full group-hover:scale-110 transition">üß†</div>
            <h3 class="text-xl font-bold text-white mb-1">Befrienders Kenya</h3>
            <p class="text-pink-400 text-xs font-bold uppercase mb-3">Mental Health</p>
            <p class="text-slate-400 text-sm mb-4 line-clamp-2">Free confidential support for those in emotional distress or at risk of suicide.</p>
            <span class="text-pink-300 text-sm font-bold flex items-center gap-2 group-hover:underline">Quick View &rarr;</span>
        </div>

        <div onclick="openModal('FIDA Kenya', 'Legal Aid', '+254 20-3873511', 'The Federation of Women Lawyers in Kenya provides legal aid to women.', 'https://www.fidakenya.org/')"
             class="group cursor-pointer backdrop-blur-md bg-slate-900/60 border border-white/10 p-6 rounded-xl hover:border-blue-500/50 hover:bg-slate-800/80 transition duration-300 transform hover:-translate-y-1 shadow-lg">
            <div class="text-4xl mb-4 bg-blue-500/20 w-16 h-16 flex items-center justify-center rounded-full group-hover:scale-110 transition">‚öñÔ∏è</div>
            <h3 class="text-xl font-bold text-white mb-1">FIDA Kenya</h3>
            <p class="text-blue-400 text-xs font-bold uppercase mb-3">Legal Justice</p>
            <p class="text-slate-400 text-sm mb-4 line-clamp-2">Legal aid and representation for women facing discrimination and violence.</p>
            <span class="text-blue-300 text-sm font-bold flex items-center gap-2 group-hover:underline">Quick View &rarr;</span>
        </div>

        <div onclick="openModal('GVRC', 'Medical & Recovery', '0800720565', 'Gender Violence Recovery Centre provides free medical and psychosocial support.', 'https://gvrc.co.ke/')"
             class="group cursor-pointer backdrop-blur-md bg-slate-900/60 border border-white/10 p-6 rounded-xl hover:border-green-500/50 hover:bg-slate-800/80 transition duration-300 transform hover:-translate-y-1 shadow-lg">
            <div class="text-4xl mb-4 bg-green-500/20 w-16 h-16 flex items-center justify-center rounded-full group-hover:scale-110 transition">üè•</div>
            <h3 class="text-xl font-bold text-white mb-1">GVRC</h3>
            <p class="text-green-400 text-xs font-bold uppercase mb-3">Medical Recovery</p>
            <p class="text-slate-400 text-sm mb-4 line-clamp-2">Specialized medical treatment and trauma counseling for survivors.</p>
            <span class="text-green-300 text-sm font-bold flex items-center gap-2 group-hover:underline">Quick View &rarr;</span>
        </div>

    </div>
</div>

<div id="resourceModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden opacity-0 transition-opacity duration-300">

    <div class="bg-slate-900 border border-white/20 rounded-2xl w-full max-w-lg p-8 shadow-2xl transform scale-95 transition-transform duration-300" id="modalContent">

        <div class="flex justify-between items-start mb-6">
            <div>
                <h2 id="modalTitle" class="text-3xl font-bold text-white">Title</h2>
                <span id="modalCategory" class="text-sm font-bold text-pink-400 uppercase tracking-wide">Category</span>
            </div>
            <button onclick="closeModal()" class="text-slate-400 hover:text-white bg-white/10 hover:bg-white/20 rounded-full w-8 h-8 flex items-center justify-center transition">
                ‚úï
            </button>
        </div>

        <div class="space-y-6">
            <p id="modalDesc" class="text-slate-300 text-lg leading-relaxed">Description goes here...</p>

            <div class="bg-white/5 rounded-xl p-4 border border-white/10 space-y-3">
                <div class="flex items-center gap-3 text-white">
                    <span class="bg-green-600/20 text-green-400 p-2 rounded-lg">üìû</span>
                    <div>
                        <p class="text-xs text-slate-400 uppercase">Phone / Hotline</p>
                        <a id="modalPhoneLink" href="#" class="font-bold hover:text-green-400 transition" id="modalPhone">+123 456 789</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-8 flex gap-4">
            <a id="modalExternalLink" href="#" target="_blank" class="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-3 rounded-xl text-center shadow-lg transition transform hover:-translate-y-1">
                Visit Official Site
            </a>
            <button onclick="closeModal()" class="px-6 py-3 rounded-xl border border-white/10 text-slate-300 hover:bg-white/5 font-bold transition">
                Close
            </button>
        </div>

    </div>
</div>

<script>
    const modal = document.getElementById('resourceModal');
    const modalContent = document.getElementById('modalContent');

    function openModal(title, category, phone, desc, url) {
        // 1. Populate Data
        document.getElementById('modalTitle').innerText = title;
        document.getElementById('modalCategory').innerText = category;
        document.getElementById('modalDesc').innerText = desc;

        // Update Phone
        document.getElementById('modalPhoneLink').innerText = phone;
        document.getElementById('modalPhoneLink').href = "tel:" + phone.replace(/\s/g, ''); // Removes spaces for tel: link

        // Update Website Link
        document.getElementById('modalExternalLink').href = url;

        // 2. Show Modal (Animation logic)
        modal.classList.remove('hidden');
        // Small delay to allow 'hidden' to be removed before opacity transition starts
        setTimeout(() => {
            modal.classList.remove('opacity-0');
            modalContent.classList.remove('scale-95');
            modalContent.classList.add('scale-100');
        }, 10);
    }

    function closeModal() {
        // Reverse Animation
        modal.classList.add('opacity-0');
        modalContent.classList.remove('scale-100');
        modalContent.classList.add('scale-95');

        // Hide after animation finishes
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }

    // Close if clicking outside the modal box
    modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeModal();
        }
    });
</script>

{% endblock %}